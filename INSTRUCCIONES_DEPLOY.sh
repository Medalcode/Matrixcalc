#!/bin/bash

# ========================================
# MatrixCalc v2.0 - Deploy Instructions
# ========================================

echo "๐ INSTRUCCIONES PARA DESPLEGAR A CLOUD RUN"
echo ""
echo "Este script no puede ejecutarse automรกticamente porque gcloud no estรก instalado"
echo "en este entorno. Sigue estos pasos en tu mรกquina local o Cloud Shell:"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 1: Preparar el Cรณdigo"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "1.1. Commit todos los cambios:"
echo ""
echo "    git status"
echo "    git add ."
echo "    git commit -m \"feat: add dark mode, toasts, templates and all v2.0 improvements\""
echo "    git push"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 2: Obtener URL del Backend Actual"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Ejecuta este comando para obtener la URL de tu backend:"
echo ""
echo "    gcloud run services describe matrixcalc-backend \\"
echo "      --region=us-central1 \\"
echo "      --format=\"value(status.url)\""
echo ""
echo "Copia la URL que te devuelve (ejemplo: https://matrixcalc-backend-xxx.run.app)"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 3: Configurar Frontend"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Reemplaza [BACKEND_URL] con la URL que obtuviste:"
echo ""
echo "    echo \"VITE_API_URL=https://[BACKEND_URL]/api\" > frontend/.env.production"
echo ""
echo "Ejemplo:"
echo "    echo \"VITE_API_URL=https://matrixcalc-backend-xxx.run.app/api\" > frontend/.env.production"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 4: Deploy Frontend (Solo UI Changes)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Si solo quieres actualizar el frontend con las mejoras de UI:"
echo ""
echo "    cd /ruta/a/Matrixcalc"
echo "    gcloud run deploy matrixcalc-frontend \\"
echo "      --source=. \\"
echo "      --region=us-central1 \\"
echo "      --platform=managed \\"
echo "      --allow-unauthenticated"
echo ""
echo "Tiempo estimado: 5-8 minutos"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 5 (OPCIONAL): Deploy Backend + Frontend"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Si quieres actualizar backend y frontend (deploy completo):"
echo ""
echo "    gcloud builds submit \\"
echo "      --config=cloudbuild.yaml \\"
echo "      --substitutions=_REGION=us-central1,_REPOSITORY=matrixcalc"
echo ""
echo "Tiempo estimado: 10-15 minutos"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 6: Verificar Deploy"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Obtener URL del frontend:"
echo ""
echo "    gcloud run services describe matrixcalc-frontend \\"
echo "      --region=us-central1 \\"
echo "      --format=\"value(status.url)\""
echo ""
echo "Abre la URL en tu navegador y verifica:"
echo ""
echo "  โ Dark mode toggle en la navegaciรณn"
echo "  โ /calculator โ Templates visibles"
echo "  โ Crear matriz โ Toast de confirmaciรณn"
echo "  โ /stats โ Grรกficos cargando"
echo "  โ /about โ Pรกgina con contenido"
echo "  โ /docs โ Documentaciรณn completa"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ฏ RESUMEN DE ARCHIVOS MODIFICADOS"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Nuevos componentes (8):"
echo "  โข ToastContainer.vue"
echo "  โข ThemeToggle.vue"
echo "  โข LoadingSpinner.vue"
echo "  โข ConfirmationModal.vue"
echo "  โข DocsView.vue"
echo ""
echo "Nuevos composables (3):"
echo "  โข useToast.ts"
echo "  โข useTheme.ts"
echo "  โข useConfirmation.ts"
echo ""
echo "Nuevas utilidades (1):"
echo "  โข matrixTemplates.ts (14 templates)"
echo ""
echo "Componentes mejorados (5):"
echo "  โข App.vue (dark mode + toasts)"
echo "  โข MatrixEditor.vue (templates + toasts)"
echo "  โข MatrixList.vue (modal + toasts)"
echo "  โข OperationPanel.vue (validaciones)"
echo "  โข BackupManager.vue (UI renovada)"
echo ""
echo "Vistas mejoradas (2):"
echo "  โข HomeView.vue (dark mode)"
echo "  โข AboutView.vue (dark mode)"
echo ""
echo "Configuraciรณn (2):"
echo "  โข tailwind.config.js (darkMode: 'class')"
echo "  โข router/index.ts (rutas /about y /docs)"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ก TIPS"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "โข Si solo cambiaste el frontend, solo deploy frontend (PASO 4)"
echo "โข El backend no cambiรณ, asรญ que puedes omitir su deploy"
echo "โข Las URLs se mantienen igual โ No hay downtime"
echo "โข Puedes hacer rollback si algo falla"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ COMANDO RECOMENDADO (Frontend Only)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Como solo mejoramos el frontend, ejecuta:"
echo ""
echo "# 1. Configurar backend URL"
echo "BACKEND_URL=\$(gcloud run services describe matrixcalc-backend --region=us-central1 --format=\"value(status.url)\")"
echo "echo \"VITE_API_URL=\${BACKEND_URL}/api\" > frontend/.env.production"
echo ""
echo "# 2. Deploy frontend"
echo "gcloud run deploy matrixcalc-frontend --source=. --region=us-central1 --allow-unauthenticated"
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ ยกTODO LISTO PARA DEPLOY!"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
